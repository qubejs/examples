title: Sandbox Home
template: apps/core/templates/page
className: sq-content-page--full-width sq-content-page--with-fixed-nav
layout: apps/layouts/spa
containerTemplate: Homepage
hook:
  load:
reset:
  type: clearAll
merge:
  currentError : .lastError.key
items:
  # First image with home content
  - component: Progress
    className: tp-progress--active
    overlay: true
    match:
        isSubmitting:
          validators:
            - type: equals
              matchValue: true
  - component: Wrapper
    className: root-login-form
    items:
      - header: |
          ##moduleData.loginHeaderMessage##
        component: Header
        className: mt-xtrawide
      - component: Alert
        type: error
        className: mb-wide
        message: Email/password doesn't match
        match:
            currentError:
              validators:
                - type: equals
                  matchValue: NOT_LOGGED_IN
      - component: Form
        name: login
        className: full-width--button
        fields:
          - cmpType: Input
            label: Username
            name: email
            validators:
              - type: required
              - type: email
          - cmpType: Password
            name: password
            type: password
            label: Password
            validators:
              - type: required
          - name: link
            cmpType: LinkButton
            buttonText: Forgot password?
            to: /content/en/forgotpassword
        actions:
          - buttonText: Login
            className: sq-button--block
            actionType: submit-form
            size: large
            url:  /api/v1/login
            method: post
            postHook: auth.authenticate
            params:
              email: .login.email
              password: .login.password
